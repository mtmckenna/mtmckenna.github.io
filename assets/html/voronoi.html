<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="initial-scale=1,width=device-width,user-scalable=no,viewport-fit=cover,maximum-scale=1,user-scalable=no"/><title>Voronoi Blog Post</title><style>body,html{width:100%;height:100%;min-height:fill-available;margin:0;padding:0;overflow:hidden}body{place-items:center;display:flex;justify-content:center;align-items:center}#game{background-color:#5f9c3d}</style></head><body><script>(()=>{"use strict";var t=function(){function t(t,i){this.t={left:0,right:0,i:0,h:0},t.addEventListener("keydown",this.u.bind(this),{capture:!0,passive:!1}),t.addEventListener("keyup",this.o.bind(this),{capture:!0,passive:!1}),this.v=i}return t.prototype.u=function(t){switch(t.key){case"ArrowLeft":this.t.left=1;break;case"ArrowRight":this.t.right=1;break;case"ArrowUp":this.t.i=1;break;case"ArrowDown":this.t.h=1}this.v(this.p)},t.prototype.o=function(t){switch(t.key){case"ArrowLeft":this.t.left=0;break;case"ArrowRight":this.t.right=0;break;case"ArrowUp":this.t.i=0;break;case"ArrowDown":this.t.h=0;break;default:return}this.v(this.p)},Object.defineProperty(t.prototype,"p",{get:function(){return{x:this.t.right-this.t.left,y:this.t.i-this.t.h}},M:!1,l:!0}),t}(),i=75,n=function(){function t(t,i){this.m={x:0,y:0},this.A={x:0,y:0},this.g={x:0,y:0},this.pressed=!1,this.canvas=t,this.v=i,this.k(this.canvas)}return t.prototype.k=function(t){t.addEventListener("mousedown",this.j.bind(this),{capture:!0,passive:!1}),t.addEventListener("mousemove",this.O.bind(this),{capture:!0,passive:!1}),t.addEventListener("mouseup",this._.bind(this),{capture:!0,passive:!1}),t.addEventListener("touchstart",this.q.bind(this),{capture:!0,passive:!1}),t.addEventListener("touchend",this._.bind(this),{capture:!0,passive:!1}),t.addEventListener("touchmove",this.D.bind(this),{capture:!0,passive:!1}),t.addEventListener("touchcancel",this._.bind(this),{capture:!0,passive:!1})},t.prototype.F=function(){this.g.x=(this.A.x-this.m.x)/i,this.g.y=(this.m.y-this.A.y)/i},t.prototype.L=function(t){var i={x:0,y:0},n=this.canvas.getBoundingClientRect(),r=0,s=0;return t instanceof MouseEvent?(r=t.clientX,s=t.clientY):t instanceof TouchEvent&&(r=t.changedTouches[0].clientX,s=t.changedTouches[0].clientY),i.x=(r-n.left)*(this.canvas.width/n.width),i.y=(s-n.top)*(this.canvas.height/n.height),i},t.prototype.q=function(t){t.preventDefault();var i=this.L(t);this.N(i.x,i.y)},t.prototype.D=function(t){t.preventDefault();var i=this.L(t);this.R(i.x,i.y)},t.prototype.j=function(t){t.preventDefault();var i=this.L(t);this.N(i.x,i.y)},t.prototype.O=function(t){t.preventDefault();var i=this.L(t);this.R(i.x,i.y)},t.prototype.N=function(t,i){this.m.x=t,this.m.y=i,this.A.x=t,this.A.y=i,this.F(),this.pressed=!0,this.v(this.g)},t.prototype.R=function(t,n){if(this.pressed){var r=t-this.m.x,s=n-this.m.y,h=Math.hypot(r,s);if(this.A.x=t,this.A.y=n,h>i){var u=r/h*i,e=s/h*i;this.A.x=this.m.x+u,this.A.y=this.m.y+e}this.F(),this.v(this.g)}},t.prototype._=function(t){t.preventDefault(),t.stopPropagation(),this.pressed=!1,this.m.x=0,this.m.y=0,this.A.x=0,this.A.y=0,this.F(),this.v(this.g)},t.prototype.T=function(t){this.pressed&&(this.U(t),this.C(t))},t.prototype.U=function(t){t.strokeStyle="blue",t.lineWidth=2,t.beginPath(),this.pressed?t.arc(this.m.x,this.m.y,i,0,2*Math.PI):t.arc(135,this.canvas.height-i-30,i,0,2*Math.PI),t.stroke(),t.closePath()},t.prototype.C=function(t){t.strokeStyle="white",t.lineWidth=2,t.beginPath(),t.arc(this.A.x,this.A.y,37.5,0,2*Math.PI),t.stroke(),t.closePath()},t}();function r(t,i){return Math.random()*(i-t)+t}function s(t,i,n){return Math.min(Math.max(t,i),n)}function h(t,i){return{x:t.x-i.x,y:t.y-i.y}}function u(t,i){return{x:t.x*i,y:t.y*i}}var e,o=(e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},e(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),a=function(){function t(){this.angle=0,this.P={x:0,y:0},this.S={x:0,y:0},this.B={x:0,y:0},this.size={x:16,y:16},this.color="orange"}return t.prototype.T=function(t){t.save(),t.translate(this.B.x,this.B.y),t.rotate(this.angle),t.fillStyle=this.color,t.fillRect(-this.size.x/2,-this.size.y/2,this.size.x,this.size.y),t.restore()},t.prototype.G=function(t){this.S=t,this.B.x=this.S.x+this.size.x/2,this.B.y=this.S.y+this.size.y/2},t}(),c=function(t){function i(i,n){var r=t.call(this)||this;return r.H=i,r.I=n,r.color="#b465c7",r.G({x:i.x/2,y:i.y/2}),r.size={x:25,y:25},r}return o(i,t),i.prototype.update=function(){this.angle=(this.angle+.01)%(2*Math.PI);this.P.x+=.75*this.I.x,this.P.y-=.75*this.I.y;var t=Math.hypot(this.P.x,this.P.y);t>3&&(this.P.x=this.P.x/t*3,this.P.y=this.P.y/t*3),this.P.x*=.9,this.P.y*=.9;var i=s(this.S.x+this.P.x,0,this.H.x-this.size.x),n=s(this.S.y+this.P.y,0,this.H.y-this.size.y);this.G({x:i,y:n})},i}(a),f=function(t){function i(i,n,r){var s=t.call(this)||this;return s.J="#474747",s.S=i,s.size=n,s.angle=r,s.color=s.J,s.G(i),s}return o(i,t),i.prototype.update=function(){},i}(a);function v(t,i){var n=function(t,i){var n=p(t,i),r=p(i,t),s={K:0,V:{x:0,y:0},start:{x:0,y:0},end:{x:0,y:0},a:t,b:i};if(n.W>=0||r.W>=0)return s;n.W>r.W?(s.K=-1*n.W,s.V=y(n.axis),s.start=n.X,s.end=function(t,i){return{x:t.x+i.x,y:t.y+i.y}}(n.X,u(s.V,s.K))):(s.K=-1*r.W,s.V=u(y(r.axis),-1),s.end=r.X,s.start=h(r.X,u(s.V,s.K)));return s}(t,i);return n.K>0?{Y:n.start,Z:n.end}:null}function y(t){var i,n,r={x:t.y,y:-t.x};return i=r,0===(n=Math.sqrt(i.x*i.x+i.y*i.y))?{x:0,y:0}:{x:i.x/n,y:i.y/n}}function x(t,i){var n=t[i];return h(t[(i+1)%t.length],n)}function p(t,i){for(var n,r,s=w(t),u=w(i),e=Number.NEGATIVE_INFINITY,o={x:0,y:0},a={x:0,y:0},c={x:0,y:0},f=0,v=0,p=s;v<p.length;v++){for(var M=p[v],b=y(x(s,f)),d=Number.POSITIVE_INFINITY,l=0,m=u;l<m.length;l++){var A=m[l],g=(n=h(A,M),r=b,n.x*r.x+n.y*r.y);g<d&&(d=g,a=A)}d>e&&(e=d,o=x(s,f),c=a),f++}return{W:e,axis:o,X:c}}function w(t){for(var i=t.B,n=t.size,r=t.angle,s=n.x,h=n.y,u=Math.cos(r),e=Math.sin(r),o=[{x:-s/2,y:-h/2},{x:s/2,y:-h/2},{x:s/2,y:h/2},{x:-s/2,y:h/2}],a=0,c=o;a<c.length;a++){var f=c[a],v=f.x,y=f.y;f.x=v*u-y*e+i.x,f.y=v*e+y*u+i.y}return o}var M=function(t,i,n){if(n||2===arguments.length)for(var r,s=0,h=i.length;s<h;s++)!r&&s in i||(r||(r=Array.prototype.slice.call(i,0,s)),r[s]=i[s]);return t.concat(r||Array.prototype.slice.call(i))},b=document.createElement("canvas"),d=b.getContext("2d"),l={x:500,y:500};b.id="game",b.width=l.x,b.height=l.y,document.createElement("div").appendChild(b),document.body.appendChild(b);var m=new n(b,(function(t){A.x=t.x,A.y=t.y}));new t(window,(function(t){A.x=t.x,A.y=t.y}));for(var A={x:0,y:0},g=new c(l,A),k=[],j=0;j<10;j++)k.push({x:r(0,l.x),y:r(0,l.y)});var O,E,_=function(t){for(var i=0,n=t;i<n.length;i++){var r=T(e=n[i],t);e.$=M([],r,!0)}for(var s=[],h=0,u=t;h<u.length;h++)for(var e=u[h],o=0,a=e.$;o<a.length;o++){var c=a[o],f=e.it.tt,v=c.it.tt,y={Y:f,Z:v};!1===B(s,y)&&s.push(y)}return s}((E=[R(F(O=k))],O.forEach((function(t){E=function(t,i){var n=[];return i=i.filter((function(i){return!function(t,i){var n=N(i),r=t.x-n.tt.x,s=t.y-n.tt.y;return r*r+s*s<=n.nt*n.nt}(t,i)||(n.push({Y:i.Y,Z:i.Z}),n.push({Y:i.Z,Z:i.rt}),n.push({Y:i.rt,Z:i.Y}),!1)})),n=function(t){for(var i=[],n=0;n<t.length;++n){for(var r=!0,s=0;s<t.length;++s)if(n!=s&&G(t[n],t[s])){r=!1;break}r&&i.push(t[n])}return i}(n),n.forEach((function(n){var r=N({Y:n.Y,Z:n.Z,rt:t});i.push({Y:n.Y,Z:n.Z,rt:t,it:r})})),i}(t,E)})),E)),q=_.map((function(t){return function(t,i){var n=t.Z.x-t.Y.x,r=t.Z.y-t.Y.y,s=Math.atan2(r,n)+Math.PI/2,h=Math.hypot(n,r),u={x:t.Y.x+n/2,y:t.Y.y+r/2},e={x:u.x-i/2,y:u.y-h/2};return new f(e,{x:i,y:h},s)}(t,30)}));function z(t,i){var n=(t.x+i.x)/2,r=(t.y+i.y)/2,s=i.y-t.y,h=-(i.x-t.x),u=Math.hypot(s,h),e=s/u,o=h/u;return{Y:{x:n+e,y:r+o},Z:{x:n-e,y:r-o}}}function D(t,i){return{tt:t,nt:i}}function F(t){return L(t,[])}function L(t,i){if(0===t.length||3===i.length)return 0===i.length?D({x:0,y:0},0):1===i.length?D(i[0],0):2===i.length?D({x:(i[0].x+i[1].x)/2,y:(i[0].y+i[1].y)/2},S(i[0],i[1])/2):N({Y:i[0],Z:i[1],rt:i[2]});var n=t[t.length-1],r=L(t.slice(0,-1),i);return S(r.tt,n)<=r.nt?r:L(t.slice(0,-1),i.concat(n))}function N(t){var i,n,r,s,h,u,e,o,a,c,f,v=t.Y,y=t.Z,x=t.rt,p=z(v,y),w=z(y,x),M=(n=w,r=(i=p).Y.x,s=i.Y.y,h=i.Z.x,u=i.Z.y,e=n.Y.x,o=n.Y.y,a=n.Z.x,c=n.Z.y,0===(f=(r-h)*(o-c)-(s-u)*(e-a))?null:{x:((r*u-s*h)*(e-a)-(r-h)*(e*c-o*a))/f,y:((r*u-s*h)*(o-c)-(s-u)*(e*c-o*a))/f});return{tt:M,nt:Math.sqrt(Math.pow(v.x-M.x,2)+Math.pow(v.y-M.y,2))}}function R(t){var i=2*t.nt,n=t.tt;return{Y:{x:n.x,y:n.y+i},Z:{x:n.x-i*Math.sqrt(3)/2,y:n.y-i/2},rt:{x:n.x+i*Math.sqrt(3)/2,y:n.y-i/2}}}function T(t,i){for(var n=[],r=0,s=i;r<s.length;r++){var h=s[r];U(t,h)&&n.push(h)}return n}function U(t,i){var n=0;return C(t.Y,i)&&n++,C(t.Z,i)&&n++,C(t.rt,i)&&n++,2===n}function C(t,i){return P(t,i.Y)||P(t,i.Z)||P(t,i.rt)}function P(t,i){return t.x===i.x&&t.y===i.y}function S(t,i){return Math.hypot(t.x-i.x,t.y-i.y)}function B(t,i){for(var n=0,r=t;n<r.length;n++){if(G(r[n],i))return!0}return!1}function G(t,i){return t.Y===i.Y&&t.Z===i.Z||t.Y===i.Z&&t.Z===i.Y}function H(){var t=window.innerWidth,i=window.innerHeight,n=b.width/b.height;t/i<n?(b.style.width="".concat(t,"px"),b.style.height="".concat(t/n,"px")):(b.style.height="".concat(i,"px"),b.style.width="".concat(i*n,"px"))}requestAnimationFrame((function t(i){requestAnimationFrame(t);for(var n=function(t,i){for(var n=[],r=0;r<i.length;r++){var s=i[r],h=v(t,s);h&&n.push({st:s,ht:h})}return n}(g,q),r=n.map((function(t){return t.st})),s=0,h=q;s<h.length;s++){var u=h[s];r.includes(u)?u.color="#00ccbb":u.color=u.J}g.update(),d.clearRect(0,0,b.width,b.height),function(t,i){t.fillStyle="#000";for(var n=0,r=i;n<r.length;n++){var s=r[n];t.beginPath(),t.arc(s.x,s.y,5,0,2*Math.PI),t.fill()}}(d,k),function(t,i){for(var n=0,r=i;n<r.length;n++){r[n].T(t)}}(d,q),g.T(d),function(t,i){for(var n=0,r=i;n<r.length;n++){var s=r[n];t.strokeStyle="#f00",t.lineWidth=5,t.beginPath(),t.moveTo(s.ht.Y.x,s.ht.Y.y),t.lineTo(s.ht.Z.x,s.ht.Z.y),t.stroke()}}(d,n),m.T(d)})),H(),window.addEventListener("resize",H)})();</script></body></html>